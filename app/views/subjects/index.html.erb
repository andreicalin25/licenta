
<% if current_user.role == "TEACHER" %>
  <div class="row mt-5">
    <div class="col ms-5 me-3">
      <h2> My subjects </h2>
      <table class="table table-light table-hover rounded-pill">
        <thead>
        <tr>
          <th scope="col">Subject name</th>
          <th scope="col">Subject activity</th>
          <th scope="col"></th>
        </tr>
        </thead>
        <tbody>
        <% @subjects_of_teacher.each do |teachers_subject| %>
          <tr>
            <td><%= teachers_subject.subject.subject_name %></td>
            <td><%= teachers_subject.subject.activity %></td>
            <td><%= button_to "Remove Subject", teachers_subject_path(teachers_subject.id), controller: 'teachers_subjects', action_name: 'destroy', method: :delete, :class => "btn btn-outline-danger btn-sm", :onclick => "return confirm('Are you sure you want to delete this subject? (By doing so you will also delete all enrollments and questions related to this subject)')" %></td>
          </tr>
        <% end %>
        </tbody>
      </table>
    </div>
    <div class="col ms-3 me-5">
      <h2> Other subjects </h2>
      <table class="table table-light table-hover">
        <thead>
        <tr>
          <th scope="col">Subject name</th>
          <th scope="col">Subject activity</th>
          <th scope="col"></th>
        </tr>
        </thead>
        <tbody>
        <% @subjects_not_of_teacher.each do |subject| %>
          <tr>
            <td><%= subject.subject_name %></td>
            <td><%= subject.activity %></td>
            <td class="addSubject"><%= button_to "Add Subject", controller: 'teachers_subjects', action_name: 'create', method: :post, :class => "btn btn-outline-success btn-sm", data: {teacher_id: current_user.id, subject_id: subject.id} %></td>
          </tr>
        <% end %>
        </tbody>
      </table>
    </div>
  </div>
<% elsif current_user.role == "ADMIN" %>
  <div id="subjects">
    <% @subjects.each do |subject| %>
      <%= render subject %>
      <p>
        <%= link_to "Show this subject", subject %>
      </p>
    <% end %>
  </div>
  <%= link_to "New subject", new_subject_path %>
<% end %>


<script>
    var elements = document.getElementsByClassName("addSubject");

    for (let i = 0; i < elements.length; i++) {
        // console.log(elements[i].getElementsByTagName("button")[0])
        elements[i].getElementsByTagName("button")[0].classList.add("btn", "btn-outline-success", "btn-sm")
    }
</script>